<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="common.css">
  </head>
  <body>
    <h1>Graph States</h1>
    <h3>This example illustrates the various states a graph can be in</h3>
    <hr>
    <input type="checkbox" id="toggle-empty" value="empty" checked/> toggle empty state
    <div id="empty-container"></div>
    <hr>
    <input type="checkbox" id="toggle-error" value="error" checked/> toggle error state
    <div id="error-container"></div>
    <hr>
    <input type="checkbox" id="toggle-loading" value="loading" checked/> toggle loading state
    <div id="loading-container"></div>

    <script src="../lib/require.js"></script>
    <script src="../requirejs.conf.js"></script>
    <script>
      require(['glimpse'], function (glimpse) {
        'use strict';

        var sampleData = [{
            data: [
            {"x":1317279600000,"y":106.19392367079854},
            {"x":1317695968421.0527,"y":56.03559841401875},
            {"x":1318112336842.1052,"y":126.56398699618876},
            {"x":1318528705263.158,"y":147.48531440272927},
            {"x":1318945073684.2104,"y":134.64964700397104},
            {"x":1319361442105.2632,"y":114.76828635204583},
            {"x":1319777810526.3157,"y":77.50583724118769},
            {"x":1320194178947.3684,"y":74.262569937855},
            {"x":1320610547368.4211,"y":124.86097845248878},
            {"x":1321026915789.4736,"y":88.70440365280956},
            {"x":1321443284210.5264,"y":126.80981094017625},
            {"x":1321859652631.5789,"y":115.363494399935},
            {"x":1322276021052.6316,"y":100.65460556652397}]
          }];

        var emptyGraph = glimpse.graph()
          .config({
            emptyMessage: [
            'There is no data for the selected period.',
            'Try selecting a larger span of time to locate where data begins.'
            ]
          })
          .data([
            { id: 'sampleData1',
              title: 'My Sample Data',
              data: sampleData[0].data
            }
          ])
          .component({ type: 'line', dataId: 'sampleData1', color: '#e65b1f' })
          .render('#empty-container')
          .state('empty');

        var errorGraph = glimpse.graph()
          .data([
            { id: 'sampleData1',
              title: 'My Sample Data',
              data: sampleData[0].data
            }
          ])
          .component({ type: 'line', dataId: 'sampleData1', color: '#e65b1f' })
          .render('#error-container')
          .state('error');

        var loadingGraph = glimpse.graph()
          .data([
            { id: 'sampleData1',
              title: 'My Sample Data',
              data: sampleData[0].data
            }
          ])
          .component({ type: 'line', dataId: 'sampleData1', color: '#e65b1f' })
          .render('#loading-container')
          .state('loading');

        function toggleEmpty() {
          emptyGraph.state(this.checked ? this.value : 'normal');
        }
        function toggleError() {
          errorGraph.state(this.checked ? this.value : 'normal');
        }
        function toggleLoading() {
          loadingGraph.state(this.checked ? this.value : 'normal');
        }

        document.getElementById('toggle-empty').addEventListener('click', toggleEmpty);
        document.getElementById('toggle-error').addEventListener('click', toggleError);
        document.getElementById('toggle-loading').addEventListener('click', toggleLoading);

        // for debugging
        window.gl = glimpse;
      });
    </script>
  </body>
</html>
